{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Jindo Configuration Schema",
  "description": "Configuration schema for Jindo git hooks management",
  "properties": {
    "pre-commit": {
      "$ref": "#/definitions/hookList",
      "description": "List of hooks to run on pre-commit"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "hookList": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/hook"
      }
    },
    "hook": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/jvmHook"
        },
        {
          "$ref": "#/definitions/systemHook"
        }
      ]
    },
    "jvmHook": {
      "title": "JVM Hook",
      "description": "Hook that runs a JVM application with dependencies",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Optional unique identifier for the hook"
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Command line arguments to pass to the main class"
        },
        "main": {
          "type": "string",
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*\\.[a-zA-Z_][a-zA-Z0-9_.]*$",
          "description": "Fully qualified main class name to execute"
        },
        "repositories": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "description": "List of Maven repository URLs to search for dependencies"
        },
        "dependencies": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[^:]+:[^:]+:[^:]+$"
          },
          "description": "List of Maven dependencies in format group:artifact:version"
        }
      },
      "required": ["main"],
      "additionalProperties": false
    },
    "systemHook": {
      "title": "System Hook", 
      "description": "Hook that runs a system command",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Optional unique identifier for the hook"
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Command line arguments to pass to the command"
        },
        "command": {
          "type": "string",
          "minLength": 1,
          "description": "System command or executable to run"
        },
        "working-directory": {
          "type": "string",
          "description": "Working directory for command execution (optional)"
        }
      },
      "required": ["command"],
      "additionalProperties": false
    }
  }
}